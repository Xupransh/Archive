#include <stdint.h>
#include <stdlib.h>

#include "mp10.h"


vertex_set_t*
new_vertex_set ()
{
    int initial_id_size = 100;
    vertex_set_t *vs = malloc(sizeof(*vs));
    if(!vs)
    {
        free(vs);
        return NULL;
    }
    int32_t *id_copy = calloc(initial_id_size,sizeof(*id_copy));
    if(!(id_copy))
    {
        free_vertex_set(vs);
        return NULL;
    }
    vs->id = id_copy;
    vs->id_array_size = initial_id_size;
    vs->count = 0;
    return vs;

}

int32_t
resizeVertexSetID(vertex_set_t *vs)
{
    int32_t *id_copy = realloc(vs->id,2*vs->id_array_size*sizeof(vs->id));
    if(id_copy)
    {
        vs->id_array_size*=2;
        vs->id = id_copy;
        return 1;
    }
    free(id_copy);
    return 0;
}

void
free_vertex_set (vertex_set_t* vs)
{
    free(vs->id);
    free(vs);
}


path_t*
new_path ()
{
    path_t *path = malloc(sizeof(*path));
    if(!path)
    {
        free(path);
        return NULL;
    }
    path->n_vertices = 0;
    path->id = NULL;
    return path;
}


void
free_path (path_t* path)
{
    free(path->id);
    free(path);
}
